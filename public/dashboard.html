<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - Travel Umrah</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-light">
  <div class="d-flex" id="wrapper">
    <!-- Sidebar -->
    <div class="bg-white border-end" id="sidebar-wrapper">
      <div class="sidebar-heading text-center py-4 fw-bold fs-4 border-bottom">
         Travel Umrah
      </div>
      <div class="list-group list-group-flush">
        <a href="dashboard.html" class="list-group-item list-group-item-action active">
          <i class="bi bi-speedometer2 me-2"></i> Dashboard
        </a>
        <a href="jamaah.html" class="list-group-item list-group-item-action">
          <i class="bi bi-people me-2"></i> Data Jamaah
        </a>
        <a href="agen.html" class="list-group-item list-group-item-action">
          <i class="bi bi-person-badge me-2"></i> Data Agen
        </a>
        <a href="keuangan.html" class="list-group-item list-group-item-action">
          <i class="bi bi-cash-coin me-2"></i> Keuangan
        </a>
      </div>
    </div>

    <!-- Page Content -->
    <div id="page-content-wrapper" class="w-100">
      <nav class="navbar navbar-light bg-white border-bottom shadow-sm px-3">
        <button class="btn btn-outline-secondary" id="menu-toggle">
          <i class="bi bi-list"></i>
        </button>
        <span class="navbar-brand mb-0 h5">Dashboard Admin</span>
        <button class="btn btn-danger btn-sm" id="logoutBtn">
          <i class="bi bi-box-arrow-right"></i> Logout
        </button>
      </nav>

      <div class="container-fluid p-4">
        <div class="row g-4">
          <div class="col-md-3">
            <div class="card shadow-sm border-0 text-center p-3">
              <i class="bi bi-people-fill fs-1 text-primary mb-2">
                <h6 class="card-title text-muted">Total Jamaah</h6>
                <h3 id="totalJamaah" class="fw-bold text-primary">0</h3>
              </i>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card shadow-sm border-0 text-center p-3">
              <i class="bi bi-people-fill fs-1 text-primary mb-2">
                <h6 class="card-title text-muted">Total Agen</h6>
                <h3 id="totalAgen" class="fw-bold text-success">0</h3>
              </i>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card shadow-sm border-0 text-center p-3">
              <i class="bi bi-people-fill fs-1 text-primary mb-2">
                <h6 class="card-title text-muted">Pemasukan</h6>
                <h3 id="totalPemasukan" class="fw-bold text-success">Rp 0</h3>
              </i>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card shadow-sm border-0 text-center p-3">
              <i class="bi bi-people-fill fs-1 text-primary mb-2">
                <h6 class="card-title text-muted">Pengeluaran</h6>
                <h3 id="totalPengeluaran" class="fw-bold text-danger">Rp 0</h3>
              </i>
            </div>
          </div>
        </div>

        <div class="mt-5">
          <h4 class="mb-3"> Statistik Ringkas</h4>
          <canvas id="chartKeuangan"></canvas>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/dashboard.js"></script>
  <script>
  const user = JSON.parse(localStorage.getItem('user'));
  if (!user) {
    window.location.href = 'login.html';
  } else {
    document.getElementById('welcome').innerText = `Halo, ${user.username} (${user.role})`;

    // Contoh: hanya admin yang bisa melihat menu keuangan
    if (user.role !== 'admin') {
      document.getElementById('menu-keuangan').style.display = 'none';
    }
  }
</script>

</body>
</html>
